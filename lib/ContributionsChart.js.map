{"version":3,"sources":["../src/containers/ContributionsChart.js"],"names":["d3","ContributionsChart","props","state","data","label","values","x","Date","y","xScale","width","_handleResize","bind","window","addEventListener","nextProps","size","newValues","forEach","value","key","push","setState","element","findDOMNode","parentNode","offsetWidth","type","scaleTime","domain","range","console","log","top","bottom","left","right","Component"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;AACA;;IAAYA,E;;AACZ;;;;AACA;;AAEA;;;;;;;;;;;;AAEA;;;;;;;;;;IAUMC,kB;;;AAEJ;;;;;;;;;AASA,8BAAaC,KAAb,EAAoB;AAAA;;AAAA,wIACZA,KADY;;AAElB,UAAKC,KAAL,GAAa;AACXC,YAAM;AACJC,eAAO,EADH;AAEJC,gBAAQ,CACN,EAAEC,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL,EAA2BC,GAAG,CAA9B,EADM,EAEN,EAAEF,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL,EAA2BC,GAAG,EAA9B,EAFM,EAGN,EAAEF,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL,EAA2BC,GAAG,EAA9B,EAHM,EAIN,EAAEF,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL,EAA2BC,GAAG,EAA9B,EAJM,EAKN,EAAEF,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL,EAA2BC,GAAG,EAA9B,EALM,EAMN,EAAEF,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL,EAA2BC,GAAG,EAA9B,EANM,EAON,EAAEF,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL,EAA2BC,GAAG,EAA9B,EAPM,EAQN,EAAEF,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL,EAA2BC,GAAG,EAA9B,EARM,EASN,EAAEF,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL,EAA2BC,GAAG,EAA9B,EATM,EAUN,EAAEF,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL,EAA2BC,GAAG,EAA9B,EAVM,EAWN,EAAEF,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL,EAA2BC,GAAG,EAA9B,EAXM,EAYN,EAAEF,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL,EAA2BC,GAAG,EAA9B,EAZM,EAaN,EAAEF,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL,EAA2BC,GAAG,EAA9B,EAbM,EAcN,EAAEF,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL,EAA2BC,GAAG,EAA9B,EAdM,EAeN,EAAEF,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL,EAA2BC,GAAG,EAA9B,EAfM,EAgBN,EAAEF,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL,EAA2BC,GAAG,EAA9B,EAhBM,EAiBN,EAAEF,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL,EAA2BC,GAAG,EAA9B,EAjBM,EAkBN,EAAEF,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL,EAA2BC,GAAG,EAA9B,EAlBM,EAmBN,EAAEF,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAL,EAA2BC,GAAG,EAA9B,EAnBM;AAFJ,OADK;AAyBXC,cAAQ,IAzBG;AA0BXC,aAAO;AA1BI,KAAb;AA4BA,UAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBC,IAAnB,OAArB;AA9BkB;AA+BnB;;AAED;;;;;;;;;;wCAMqB;AACnBC,aAAOC,gBAAP,CAAwB,QAAxB,EAAkC,KAAKH,aAAvC;AACD;;AAED;;;;;;;;;;8CAO0BI,S,EAAW;AAAA,UAC3BZ,IAD2B,GAClB,KAAKD,KADa,CAC3BC,IAD2B;;AAEnC,UAAIY,UAAUZ,IAAV,IAAkBY,UAAUZ,IAAV,CAAea,IAAf,GAAsB,CAA5C,EAA+C;AAC7C,YAAIC,YAAY,EAAhB;AACAF,kBAAUZ,IAAV,CAAee,OAAf,CAAuB,UAACC,KAAD,EAAQC,GAAR,EAAgB;AACrCH,oBAAUI,IAAV,CAAe,EAAEf,GAAG,IAAIC,IAAJ,CAASa,GAAT,CAAL,EAAoBZ,GAAGW,KAAvB,EAAf;AACD,SAFD;AAGA,aAAKG,QAAL,CAAc,EAAEnB,mBAAWA,IAAX,IAAiBE,QAAQY,SAAzB,GAAF,EAAd;AACA,aAAKN,aAAL,CAAmBM,SAAnB;AACD;AACF;;AAED;;;;;;;;;;;;kCASeZ,M,EAAQ;AAAA,UACbF,IADa,GACJ,KAAKD,KADD,CACbC,IADa;;AAErB,UAAMoB,UAAU,mBAASC,WAAT,CAAqB,IAArB,CAAhB;AACA,UAAID,OAAJ,EAAa;AACX,YAAMb,QAAQa,QAAQE,UAAR,CAAmBC,WAAjC;AACA,YAAIrB,OAAOsB,IAAP,KAAgB,QAApB,EAA8B;AAC5B,eAAKL,QAAL,CAAc;AACZZ,mBAAOA,KADK;AAEZD,oBAAQV,GAAG6B,SAAH,GAAeC,MAAf,CAAsB,CAAC,sBAAO1B,KAAKE,MAAL,CAAY,CAAZ,EAAeC,CAAtB,CAAD,EAA2B,IAAIC,IAAJ,EAA3B,CAAtB,EAA8DuB,KAA9D,CAAoE,CAAC,CAAD,EAAIpB,KAAJ,CAApE;AAFI,WAAd;AAID,SALD,MAKO;AACL,eAAKY,QAAL,CAAc;AACZZ,mBAAOA,KADK;AAEZD,oBAAQV,GAAG6B,SAAH,GAAeC,MAAf,CAAsB,CAAC,sBAAOxB,OAAO,CAAP,EAAUC,CAAjB,CAAD,EAAsB,IAAIC,IAAJ,EAAtB,CAAtB,EAAyDuB,KAAzD,CAA+D,CAAC,CAAD,EAAIpB,KAAJ,CAA/D;AAFI,WAAd;AAID;AACF;AACF;;AAED;;;;;;;;;;6BAOU;AAAA,mBACsB,KAAKR,KAD3B;AAAA,UACFC,IADE,UACFA,IADE;AAAA,UACIO,KADJ,UACIA,KADJ;AAAA,UACWD,MADX,UACWA,MADX;;AAERsB,cAAQC,GAAR,CAAY7B,IAAZ;AACA,aACE;AAAA;AAAA,UAAK,IAAG,eAAR;AACE;AACE,gBAAMA,IADR;AAEE,iBAAOO,KAFT;AAGE,kBAAQ,EAHV;AAIE,kBAAQ,EAAEuB,KAAK,EAAP,EAAWC,QAAQ,CAAnB,EAAsBC,MAAM,CAA5B,EAA+BC,OAAO,CAAtC,EAJV;AAKE,kBAAQ3B,MALV;AAME,uBAAY;AANd;AADF,OADF;AAYD;;;;EA3H8B,gBAAM4B,S;;AA8HvC;;;;;;;;;kBAOerC,kB","file":"ContributionsChart.js","sourcesContent":["import React from 'react'\nimport ReactDOM from 'react-dom'\nimport * as d3 from 'd3'\nimport moment from 'moment'\nimport { LineChart } from 'react-d3-components'\n\nimport './Contributions.scss'\n\n/**\n * @class ContributionsChart\n *\n * This is the layout class. This class gives a data structure to the LineChart\n * component. This class also takes case of any resize function calls.\n *\n * @since v0.3.0-1\n * @author Jóhan Davidsen <johan.davidsen@fjakkarin.com>\n *\n */\nclass ContributionsChart extends React.Component {\n\n  /**\n   * @constructor\n   *\n   * The constructor initializes the local state and binds the local methods to\n   * this class.\n   *\n   * @prop { object } props -\n   *\n   */\n  constructor (props) {\n    super(props)\n    this.state = {\n      data: {\n        label: '',\n        values: [\n          { x: new Date(2014, 2, 5), y: 0},\n          { x: new Date(2014, 3, 5), y: 20},\n          { x: new Date(2014, 4, 5), y: 10},\n          { x: new Date(2014, 5, 5), y: 50},\n          { x: new Date(2014, 6, 5), y: 40},\n          { x: new Date(2014, 7, 5), y: 10},\n          { x: new Date(2014, 8, 5), y: 10},\n          { x: new Date(2014, 9, 5), y: 10},\n          { x: new Date(2015, 4, 5), y: 10},\n          { x: new Date(2015, 5, 5), y: 50},\n          { x: new Date(2015, 6, 5), y: 40},\n          { x: new Date(2015, 7, 5), y: 10},\n          { x: new Date(2015, 8, 5), y: 10},\n          { x: new Date(2015, 9, 5), y: 20},\n          { x: new Date(2016, 9, 5), y: 50},\n          { x: new Date(2017, 9, 5), y: 40},\n          { x: new Date(2018, 9, 5), y: 20},\n          { x: new Date(2019, 9, 5), y: 30},\n          { x: new Date(2020, 9, 5), y: 40}\n        ]\n      },\n      xScale: null,\n      width: 0\n    }\n    this._handleResize = this._handleResize.bind(this)\n  }\n\n  /**\n   * @method componentDidMount\n   *\n   * This method binds the local method _handleResize to the window event resize.\n   *\n   */\n  componentDidMount () {\n    window.addEventListener('resize', this._handleResize)\n  }\n\n  /**\n   * @method componentWillReceiveProps\n   *\n   * This method is called as soon as the component receives a new prop and updates\n   * the local state accordingly.\n   *\n   */\n  componentWillReceiveProps(nextProps) {\n    const { data } = this.state\n    if (nextProps.data && nextProps.data.size > 0) {\n      let newValues = []\n      nextProps.data.forEach((value, key) => {\n        newValues.push({ x: new Date(key), y: value })\n      })\n      this.setState({ data: { ...data, values: newValues } })\n      this._handleResize(newValues)\n    }\n  }\n\n  /**\n   * @method _handleResize\n   *\n   * This method is called on window resize event and it adjusts the width of the\n   * graph according to the witdh of the screen.\n   *\n   * @prop { object or array } values -\n   *\n   */\n  _handleResize (values) {\n    const { data } = this.state\n    const element = ReactDOM.findDOMNode(this)\n    if (element) {\n      const width = element.parentNode.offsetWidth\n      if (values.type === 'resize') {\n        this.setState({\n          width: width,\n          xScale: d3.scaleTime().domain([moment(data.values[0].x), new Date()]).range([0, width])\n        })\n      } else {\n        this.setState({\n          width: width,\n          xScale: d3.scaleTime().domain([moment(values[0].x), new Date()]).range([0, width])\n        })\n      }\n    }\n  }\n\n  /**\n   * @method render\n   *\n   * The render method returns a JSX structure, that React will use to render\n   * this component.\n   *\n   */\n  render () {\n    let { data, width, xScale } = this.state\n    console.log(data)\n    return (\n      <div id='contributions'>\n        <LineChart\n          data={data}\n          width={width}\n          height={50}\n          margin={{ top: 20, bottom: 0, left: 0, right: 0 }}\n          xScale={xScale}\n          interpolate='basis'\n          />\n      </div>\n    )\n  }\n}\n\n/**\n * @exports ContributionsChart\n *\n * The default export is the ContributionsChart class, written by Jóhan Davidsen\n * <johan.davidsen@fjakkarin.com>\n *\n */\nexport default ContributionsChart\n"]}